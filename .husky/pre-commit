# Get current branch name
branch=$(git rev-parse --abbrev-ref HEAD)

# Check if trying to commit directly to protected branches
if [ "$branch" = "main" ] || [ "$branch" = "develop" ]; then
    echo "ğŸš« COMMIT REJECTED!"
    echo "âŒ Direct commits to '$branch' branch are not allowed"
    echo ""
    echo "ğŸ“‹ Use GitFlow methodology instead:"
    if [ "$branch" = "main" ]; then
        echo "   â€¢ For releases: git checkout -b release/v1.x.x"
        echo "   â€¢ For hotfixes: git checkout -b hotfix/v1.x.y-description"
    else
        echo "   â€¢ For features: git checkout -b feature/description"
        echo "   â€¢ For bug fixes: git checkout -b bugfix/description"
    fi
    echo ""
    echo "ğŸ’¡ After your changes, create a Pull Request to merge back to '$branch'"
    echo ""
    exit 1
fi

# Run basic checks (lint-staged not configured yet)
echo "âœ… GitFlow check passed - committing to feature branch"